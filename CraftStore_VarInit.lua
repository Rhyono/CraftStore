CS = CraftStoreFixedAndImprovedLongClassName

CS.Debug = (GetWorldName() == "PTS" or GetDisplayName()=="@VladislavAksjonov")
CS.Name = 'CraftStoreFixedAndImproved'
CS.Title = 'CraftStore'
CS.Author = 'AlphaLemming, BlackSwan, Rhyono'
CS.Version = '2.77'
CS.Account = nil
CS.Character = nil
CS.Init = false
CS.MaxTraits = select(3,GetSmithingResearchLineInfo(1,1))
CS.JewelryMaxTraits = select(3,GetSmithingResearchLineInfo(7,1))
CS.Loc = CS.Lang[GetCVar('language.2')] or CS.Lang.en
CS.Quest = {}
CS.Extern = false
CS.Inspiration = ''

ZO_CreateStringId("SI_BINDING_NAME_CRAFTSTORE","CraftStore")

CS.Quality = {
  [0] = {0.65,0.65,0.65,1}, --Trash
        {1,   1,   1,   1}, --Normal
        {0.17,0.77,0.05,1}, --Fine
        {0.22,0.57,1,   1}, --Superior
        {0.62,0.18,0.96,1}, --Epic
        {0.80,0.66,0.10,1}, --Legendary
}
CS.QualityHex = {
  [0] = 'B3B3B3', --Trash
        'FFFFFF', --Normal
        '2DC50E', --Fine
        '3A92FF', --Superior
        'A02EF7', --Epic
        'EECA2A', --Legendary
}

CS.HealthName  = GetString(SI_ATTRIBUTES1)
CS.MagickaName = GetString(SI_ATTRIBUTES2)
CS.StaminaName = GetString(SI_ATTRIBUTES3)
	
CS.CurrentPlayer  = zo_strformat('<<C:1>>',GetUnitName('player'))
CS.SelectedPlayer = CS.CurrentPlayer
CS.UIClosed = false
CS.ChampionPointsTexture = "|t16:16:esoui/art/champion/champion_icon_32.dds|t"
--TODO: Generate recipe and ingredients list on the init
CS.Cook = {
  category = {
    CS.HealthName, 
    CS.MagickaName, 
    CS.StaminaName, 
    CS.HealthName ..' + '..CS.MagickaName, 
    CS.HealthName ..' + '..CS.StaminaName, 
    CS.MagickaName..' + '..CS.StaminaName, 
    CS.HealthName ..' + '..CS.MagickaName..' + '..CS.StaminaName,
    CS.HealthName, 
    CS.MagickaName, 
    CS.StaminaName, 
    CS.HealthName ..' + '..CS.MagickaName, 
    CS.HealthName ..' + '..CS.StaminaName, 
    CS.MagickaName..' + '..CS.StaminaName, 
    CS.HealthName ..' + '..CS.MagickaName..' + '..CS.StaminaName,
    GetString(SI_ITEMFILTERTYPE5), 
    GetString(SI_ITEMFILTERTYPE5), 
    '', 
    ''
  },
  craftLevel = 0,
  qualityLevel = 0,
  job = {amount = 0, list = nil, id = nil},
  recipe = {},
  ingredient = {},
  recipelist = {
45535,45539,45540,45541,45542,45543,45544,45545,45546,45547,45548,45549,45551,45552,45553,45554,45555,45556,45557,45559,45560,45561,45562,45563,45564,45565,45567,45568,45569,45570,45571,45572,45573,45574,45575,45576,45577,45579,45580,45581,45582,45583,45584,45587,45588,45589,45590,45591,45592,45594,45595,45596,45597,45598,45599,45600,45601,45602,45603,45604,45607,45608,45609,45610,45611,45612,45614,45615,45616,45617,45618,45619,45620,45621,45622,45623,45624,45625,45626,45627,45628,45629,45630,45631,45632,45633,45634,45636,45637,45638,45639,45640,45641,45642,45643,45644,45645,45646,45647,45648,45649,45650,45651,45652,45653,45654,45655,45656,45657,45658,45659,45660,45661,45662,45663,45664,45665,45666,45667,45668,45670,45671,45672,45673,45674,45675,45676,45677,45678,45679,45680,45681,45682,45683,45684,45685,45686,45687,45688,45689,45690,45691,45692,45693,45694,45695,45696,45697,45698,45699,45700,45701,45702,45703,45704,45705,45706,45707,45708,45709,45710,45711,45712,45713,45714,45715,45716,45717,45718,45719,45791,45887,45888,45889,45890,45891,45892,45893,45894,45895,45896,45897,45898,45899,45900,45901,45902,45903,45904,45905,45906,45907,45908,45909,45910,45911,45912,45913,45914,45915,45916,45917,45918,45919,45920,45921,45922,45923,45924,45925,45926,45927,45928,45929,45930,45931,45932,45933,45934,45935,45936,45937,45938,45939,45940,45941,45942,45943,45944,45945,45946,45947,45948,45949,45950,45951,45952,45953,45954,45955,45956,45957,45958,45959,45960,45961,45962,45963,45964,45965,45966,45967,45968,45969,45970,45971,45972,45973,45974,45975,45976,45977,45978,45979,45980,45981,45982,45983,45984,45985,45986,45987,45988,45989,45990,45991,45992,45993,45994,45995,45996,45997,45998,45999,46000,46001,46002,46003,46004,46005,46006,46007,46008,46009,46010,46011,46012,46013,46014,46015,46016,46017,46018,46019,46020,46021,46022,46023,46024,46025,46026,46027,46028,46029,46030,46031,46032,46033,46034,46035,46036,46037,46038,46039,46040,46041,46042,46043,46044,46045,46046,46047,46048,46049,46050,46051,46052,46053,46054,46055,46056,46079,46081,46082,54241,54242,54243,54369,54370,54371,56943,56944,56945,56946,56947,56948,56949,56950,56951,56952,56953,56954,56955,56956,56957,56958,56959,56961,56962,56963,56964,56965,56966,56967,56968,56969,56970,56971,56972,56973,56974,56975,56976,56977,56978,56979,56980,56981,56982,56983,56984,56985,56986,56987,56988,56989,56990,56991,56992,56993,56994,56995,56996,56997,56998,56999,57000,57001,57002,57003,57004,57005,57006,57007,57008,57009,57010,57011,57012,57013,57014,57015,57016,57017,57018,57019,57020,57021,57022,57023,57024,57025,57026,57027,57028,57029,57030,57031,57032,57033,57034,57035,57036,57037,57038,57039,57040,57041,57042,57043,57044,57045,57046,57047,57048,57049,57050,57051,57052,57053,57054,57055,57056,57057,57058,57059,57060,57061,57062,57063,57064,57065,57066,57067,57068,57069,57070,57071,57072,57073,57074,57075,57076,57077,57078,57079,64223,68189,68190,68191,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68224,68225,68226,68227,68228,68229,68230,68231,68232,71060,71061,71062,71063,87682,87683,87684,87688,87689,87692,87693,87694,87698,96960,96961,96962,96963,96964,96965,96966,96967,96968,115029,120077,120767,120768,120769,120770,133551,133552,133553,139012,139017,
153624,153626,153628,171324,171331,171435
  },
  recipeduplicatelist = {
55462,152157,152158,152159,152160,152161,152162,152163,152164,152165,152166,152167,152168,152169,152170,152171,152172,152173,152174,152175,152176,152177,152178,152179,152180,152181,152182,152183,152184,152185,152186,152187,152188,152189,152190,152191,152192,152193,152194,152195,152196,152197,152198,152199,152200,152201,152202,152203,152204,152205,152206,152207,152208,152209,152210,152211,152212,152213,152214,152215,152216,152217,152218,152219,152220,152221,152222,152223,152224,152225,152226,152227,152228,152229,152230,152231,152232,152233,152234, 
  },
  ingredientlist = {
    34349,34348,34347,34346,34345,34335,34334,34333,34330,34329,34324,34323,
    34321,34311,34309,34308,34307,34305,33774,33773,33772,33771,33768,33758,
    33756,33755,33754,33753,33752,29030,28666,28639,28636,28610,28609,28604,
    28603,27100,27064,27063,27059,27058,27057,27052,27049,27048,27043,27035,
    26954,26802
  }
}

CS.Furnisher = {
  recipe = {}, 
  recipelist = {
115721,115722,115723,115724,115725,115726,115727,115728,115729,115730,115731,115732,115733,115734,115735,115736,115737,115738,115739,115740,115741,115742,115743,115744,115745,115746,115747,115748,115749,115750,115751,115752,115753,115754,115755,115756,115757,115758,115759,115760,115761,115762,115763,115764,115765,115766,115767,115768,115769,115770,115771,115772,115773,115774,115775,115776,115777,115778,115779,115780,115781,115782,115783,115784,115785,115787,115788,115789,115790,115791,115792,115793,115794,115795,115796,115799,115800,115801,115802,115803,115804,115805,115806,115807,115808,115809,115810,115811,115812,115813,115814,115815,115816,115817,115818,115819,115820,115821,115822,115823,115824,115825,115826,115827,115828,115829,115830,115831,115832,115833,115834,115835,115836,115837,115838,115839,115840,115841,115842,115843,115844,115845,115846,115847,115848,115849,115850,115851,115852,115853,115854,115855,115856,115857,115858,115859,115860,115861,115862,115863,115864,115865,115866,115867,115868,115869,115870,115871,115872,115873,115874,115875,115876,115877,115878,115879,115880,115881,115882,115883,115884,115885,115886,115887,115888,115889,115890,115891,115892,115893,115894,115895,115896,115897,115898,115899,115900,115901,115902,115903,115904,115906,115907,115908,115909,115910,115911,115912,115913,115914,115915,115916,115917,115918,115919,115920,115921,115922,115923,115924,115925,115926,115927,115928,115929,115930,115931,115932,115933,115934,115935,115936,115937,115938,115939,115940,115941,115942,115943,115944,115945,115946,115947,115948,115949,115950,115951,115952,115953,115954,115955,115956,115957,115959,115961,115962,115963,115964,115965,115966,115967,115968,115969,115970,115971,115972,115973,115974,115975,115976,115977,115978,115979,115980,115981,115982,115983,115984,115985,115986,115987,115988,115989,115990,115991,115992,115993,115994,115995,115996,115997,115998,115999,116000,116001,116002,116003,116004,116005,116006,116007,116008,116009,116010,116011,116012,116013,116014,116015,116016,116017,116018,116019,116020,116021,116022,116023,116024,116025,116026,116027,116028,116029,116030,116031,116032,116033,116034,116035,116036,116037,116038,116039,116040,116041,116042,116043,116044,116045,116046,116047,116048,116049,116050,116051,116052,116053,116054,116055,116056,116057,116058,116059,116060,116061,116062,116063,116064,116065,116066,116067,116068,116069,116070,116071,116072,116073,116074,116075,116077,116078,116079,116080,116081,116082,116083,116084,116085,116086,116087,116088,116089,116090,116091,116092,116093,116094,116095,116096,116097,116098,116099,116100,116101,116102,116103,116104,116105,116106,116107,116108,116109,116110,116111,116112,116113,116114,116115,116116,116117,116118,116119,116120,116121,116122,116123,116124,116125,116126,116127,116128,116129,116130,116131,116132,116133,116134,116135,116136,116137,116138,116139,116140,116141,116142,116143,116144,116145,116146,116147,116148,116149,116150,116151,116152,116153,116154,116155,116156,116157,116158,116159,116160,116161,116162,116163,116164,116165,116166,116167,116168,116169,116170,116171,116172,116173,116174,116175,116176,116177,116178,116179,116180,116181,116182,116183,116184,116185,116186,116187,116188,116189,116190,116191,116192,116193,116194,116195,116196,116197,116198,116199,116200,116201,116202,116203,116204,116205,116206,116207,116208,116209,116210,116211,116212,116213,116216,118916,118917,118918,118919,118920,118921,118922,118923,118924,118925,118926,118927,118928,118929,118930,118931,118932,118933,118934,118935,118936,118937,118938,118939,118940,118941,118942,118943,118944,118945,118946,118947,118948,118949,118950,118951,118952,118953,118954,118955,118956,118957,118958,118959,118960,118961,118962,118963,118964,118965,118966,118967,118968,118969,118970,118971,118972,118973,118974,118975,118976,118977,118978,118979,118980,118981,118982,118983,118984,118985,118986,118987,118988,118989,118990,118991,118992,118993,118994,118995,118996,118997,118998,118999,119000,119001,119002,119003,119004,119005,119006,119007,119008,119009,119010,119011,119012,119013,119014,119015,119016,119017,119018,119019,119020,119021,119022,119023,119024,119025,119026,119027,119028,119029,119030,119031,119032,119033,119034,119035,119036,119037,119038,119039,119040,119041,119042,119043,119044,119045,119046,119047,119048,119049,119050,119051,119052,119053,119054,119055,119056,119057,119058,119059,119060,119061,119062,119063,119064,119065,119066,119067,119068,119069,119070,119071,119072,119073,119074,119075,119076,119077,119078,119079,119080,119081,119082,119083,119084,119085,119086,119087,119088,119089,119090,119091,119092,119093,119094,119095,119096,119097,119098,119099,119100,119101,119102,119103,119104,119105,119106,119107,119108,119109,119110,119111,119112,119113,119114,119115,119116,119117,119118,119119,119120,119121,119122,119123,119124,119125,119126,119127,119128,119129,119130,119131,119132,119133,119134,119135,119136,119137,119138,119139,119140,119141,119142,119143,119144,119145,119146,119147,119148,119149,119150,119151,119152,119153,119154,119155,119156,119157,119158,119159,119160,119161,119162,119163,119164,119165,119166,119167,119168,119169,119170,119171,119172,119173,119174,119175,119176,119177,119178,119179,119180,119181,119182,119183,119184,119185,119186,119187,119188,119189,119190,119191,119192,119193,119194,119195,119196,119197,119198,119199,119200,119201,119202,119203,119204,119205,119206,119207,119208,119209,119210,119211,119212,119213,119214,119215,119216,119217,119218,119219,119220,119221,119222,119223,119224,119225,119226,119228,119229,119230,119231,119232,119233,119234,119235,119236,119238,119239,119240,119241,119242,119243,119244,119245,119246,119247,119248,119249,119250,119251,119252,119253,119254,119255,119256,119257,119258,119259,119260,119261,119262,119263,119264,119265,119266,119267,119268,119269,119270,119271,119272,119273,119274,119275,119276,119277,119278,119279,119280,119281,119282,119283,119284,119285,119286,119287,119288,119290,119291,119292,119293,119295,119296,119297,119298,119299,119300,119301,119302,119303,119304,119305,119306,119307,119308,119309,119310,119311,119312,119314,119317,119325,119328,119330,119331,119338,119342,119344,119348,119350,119351,119352,119353,119354,119356,119357,119358,119359,119360,119361,119362,119363,119364,119365,119366,119367,119368,119369,119370,119371,119372,119373,119374,119375,119376,119377,119378,119379,119380,119381,119382,119383,119384,119385,119386,119387,119388,119389,119390,119391,119392,119393,119394,119395,119396,119397,119399,119400,119401,119402,119403,119404,119405,119406,119407,119408,119413,119416,119418,119420,119421,119422,119423,119424,119425,119427,119429,119432,119438,119439,119440,119443,119444,119445,119446,119451,119462,119463,119464,119465,119467,119468,119469,119470,119471,119472,119476,119477,119478,119479,119480,119481,119482,119483,119484,119485,119486,119487,119488,119489,119490,119491,119518,119520,119524,119525,119526,119527,119529,119532,119533,119539,119540,119541,119542,119543,119592,121059,121091,121098,121104,121120,121163,121164,121165,121166,121168,121197,121199,121200,121203,121207,121209,121214,121304,121305,121306,121307,121308,121309,121310,121311,121313,121315,121365,121366,121369,121371,121372,121373,121374,121545,121546,126582,126583,126834,126835,126836,126837,126838,126839,126840,126841,126842,126844,126845,126846,126847,126848,126849,126850,126851,126852,126853,126854,126855,126856,126857,126858,126859,126860,126861,126862,126863,126864,126865,126866,126867,126868,126869,126870,126871,126872,126873,126874,126875,126876,126877,126878,126879,126880,126881,126882,126883,126884,126885,126886,126887,126888,126889,126890,126891,126892,126893,126894,126895,126896,126897,126898,126899,126900,126901,126902,126903,126904,126905,126906,126907,126908,126909,126910,126911,126912,126913,126914,126915,126916,126917,126918,126919,126920,126921,126922,126923,126924,126925,126926,126927,126928,126929,126930,126931,126932,126933,126934,126935,126936,126937,126938,126939,126940,126941,126942,126943,126944,126945,126946,126947,126948,126949,126950,126951,126952,126953,126954,126955,126956,126957,126958,126959,126960,126961,126962,126963,126964,126965,126966,126967,126968,126969,126970,126971,126972,126973,126974,126975,126976,126977,126978,126979,126980,126981,126982,126983,126984,126985,126986,126987,126988,126989,126990,126991,126992,126993,126994,126995,126996,126997,126998,126999,127000,127001,127002,127003,127004,127005,127006,127007,127008,127009,127010,127011,127012,127013,127014,127015,127016,127017,127018,127019,127020,127021,127022,127023,127024,127025,127026,127027,127028,127029,127030,127031,127032,127033,127034,127035,127036,127037,127038,127039,127040,127041,127042,127043,127044,127045,127046,127047,127048,127049,127050,127051,127052,127053,127054,127055,127056,127057,127058,127059,127060,127061,127062,127063,127064,127065,127066,127067,127068,127069,127070,127071,127072,127073,127074,127075,127076,127077,127078,127079,127080,127081,127082,127083,127084,127085,127086,127087,127088,127089,127090,127091,127092,127093,127094,127095,127096,127097,127098,127099,127100,127101,127102,127103,127104,132167,132173,132179,132183,132184,132185,132186,132187,132188,132189,132190,132191,132192,132193,132194,132195,132196,132342,132343,132344,134476,134477,134478,134479,134480,134481,134482,134483,134484,134485,134486,134487,134488,134489,134490,134491,134492,134493,134494,134496,134497,134498,134500,134501,134502,134503,134504,134505,134506,134507,134508,134509,134510,134511,134512,134513,134514,134515,134516,134517,134518,134519,134520,134521,134522,134523,134524,134525,134526,134527,134528,134529,134530,134531,134532,134533,134534,134535,134536,134537,134538,134539,134540,134543,134544,134545,134546,134582,134982,134983,134984,134985,134986,134987,134998,134999,139484,139485,139486,139487,139488,139489,139490,139491,139492,139493,139494,139495,139496,139497,139498,139499,139500,139501,139502,139503,139504,139505,139506,139507,139508,139509,139510,139511,139512,139513,139514,139515,139516,139517,139518,139519,139520,139521,139522,139523,139524,139525,139526,139527,139528,139529,139530,139531,139532,139533,139534,139535,139536,139537,139538,139539,139540,139541,139542,139543,139544,139545,139546,139547,139548,139549,139550,139551,139552,139553,139554,139555,139556,139557,139558,139559,139563,139564,139565,139566,139567,139568,139569,139570,139571,139572,139573,139574,139575,139576,139577,139578,139579,139580,139581,139582,139583,139584,139585,139586,139587,139588,139589,139590,139591,139592,139593,139594,139595,139596,139597,139598,139599,139600,139601,139602,139603,139604,139605,139606,139607,139608,139609,139610,139611,139612,139613,139614,139615,139616,139617,139618,139619,139620,139621,139622,139623,139624,139625,139626,139627,139628,139629,139630,139631,139632,139633,139634,139635,139636,139637,139638,139639,139640,139641,139642,139643,139644,139645,139646,139647,139648,139649,141896,141897,141898,141899,141900,141901,141902,141903,141904,141905,141906,141907,145915,145944,145945,145946,145947,145948,145949,145950,145951,145952,145953,145954,145955,145956,145957,145958,145959,145960,145961,145962,145963,145964,145965,145966,145967,145968,145969,145970,145971,145972,145973,145974,145975,145976,145977,145978,145979,145980,145981,145982,145983,145984,145985,145986,145987,145988,145989,145990,145991,145992,145993,145994,145995,145996,145997,145998,145999,146000,146001,146002,146003,146004,146005,146006,146007,146008,146009,146010,146011,146012,146013,146014,146015,146016,146017,147651,147652,147653,147654,147655,147656,147657,151972,151973,151974,151975,151976,151977,151978,151979,151980,151981,151982,151983,151984,151985,151986,151987,151988,151989,151990,151991,151992,151993,151994,151995,151996,151997,151998,151999,152000,152001,152002,152003,152004,152005,152006,152007,152008,152009,152010,152011,152012,152013,152014,152015,152016,152017,152018,152019,152020,152021,152022,152023,152024,152025,152026,152027,152028,152029,152030,152031,152032,152033,152034,152035,152036,152037,152038,152039,152040,152041,152042,152043,152044,152045,152046,152047,152048,152049,152050,152051,152052,152053,152054,152055,152056,152057,152058,152059,152060,152061,152062,152063,152064,152065,152066,152067,152068,152069,152070,152071,152072,152073,152074,152075,152076,152077,152078,152079,152080,152081,152082,152083,152084,152085,152086,152087,152088,152089,152090,152091,152092,152093,152094,152095,152096,152097,152098,152099,152100,152101,152102,152103,152104,152105,152106,152107,152108,152109,152110,152111,152112,152113,152114,152115,152116,152117,152118,152119,152120,152237,152238,153723,153724,153725,153726,153727,153728,153729,153730,153731,153732,153733,153734,153735,159498,159499,159500,159501,159502,159503,159504,166727,166728,166729,166730,166731,166732,166733,166734,166735,166736,166737,166738,166739,166740,166741,166742,166743,166744,166745,166746,166747,166748,166749,166750,166751,166752,166753,166754,166755,166756,166757,166758,166759,166760,166761,166762,166763,166764,166765,166766,166767,166768,166769,166770,166771,166772,166773,166774,166775,166776,166777,166778,166779,166780,166781,166782,166783,166784,166785,166786,166787,166788,166789,166790,166791,166792,166793,166794,166795,166796,166797,166798,166799,166800,166801,166802,166803,166804,166805,166806,166807,166808,166809,166810,166811,166812,166813,166814,166815,166816,166817,166818,166819,166820,166821,166822,166823,166824,166825,166826,166827,166828,166829,166830,166831,166832,166833,166834,166835,166836,166837,166838,166839,166840,166841,166842,166843,166844,166845,166846,166847,166848,166849,166850,166851,166852,166853,166854,166855,166856,166857,166858,166859,166860,166861,166862,166863,166864,166865,166866,166867,166868,166869,166870,166871,166872,166873,166874,166875,166876,166877,166878,166879,166880,166881,166882,166883,166884,166885,166886,166887,166888,166889,166890,166891,166892,166893,166894,166895,166896,166897,166898,166899,166900,166901,166902,166903,166904,166905,166906,166907,166908,166909,166910,166911,166912,166913,166914,166915,166916,166917,166918,166919,166920,166921,166922,166923,166924,166925,166926,166927,166928,166929,166930,166931,166932,166933,166934,166935,166936,166937,166938,166939,166940,166941,166942,166943,166944,166945,166946,166947,166948,166949,166950,166951,166952,166953,166954,166955,166956,166957,166958,166959,167354,167355,167356,167357,167358,167359,167360,167361,167362,167363,167364,167365,167366,167367,167368,167369,167370,167371,167372,167373,167374,167375,167376,167377,167378,167379,167380,167381,167382,167383,167384,171481,171482,171483,171484,171485,171486,171487,171488,171489,171490,171491,171492,171493,171494,171495,171496,171497,171498,171499,171500,171501,171502,171503,171504,171505,171506,171507,171508,171509,171510,171511,171512,171513,171514,171515,171516,171517,171518,171519,171520,171521,171522,171523,171524,171525,171526,171527,171528,171529,171781,171782,171783,171784,171785,171786,171787,171788,171789,171790,171791,171792,171793,171794,171795,171796,171797,171798,171799,171800,171801,171802,171803,171804,171805,171806,171807,175915,175916,175917,175918,175919,175920,175921,175922,175923,175924,175925,175926,175927,175928,175929,175930,175931,175932,175933,175934,175935,175936,175937,175938,175939,175940,175941,175942,175943,175944,175945,175946,175947,175948,175949,175950,175951,175952,175953,175954,175955,175956,175957,175958,175959,175960,175961,175962,175963,175964,175965,175966,175967,175968,175969,175970,175971,175972,175973,175974,175975,175976,175977,175978,175979,175980,175981,175982,175983,175984,175985,175986,175987,175988,175989,175990,175991,175992,175993,175994,175995,175996,175997,175998,175999,176000,176001,176002,176003,176004,176005,176006,176007,176008,176009,176010,176011,176012,176013,176014,176015,176016,176017,176018,176019,176020,176021,176022,176023,176024,176025,176026,176027,176028,176029,176030,176031,176032,176033,176034,176035,176036,181549,181550,181551,181552,181553,181554,181555,181556,181557,181558,181559,181560,181561,181562,181565,181566,181567,181568,181569,181570,181571,181572,181573,181574,181575,181576,181577,181578,181579,181580,181581,181582,181583,181584,181585,182937,182938,182939,182940,182941,182942,182943,182944,182945,182946,182947,182948,182949,182950,182951,182952,182953,182954,182955,182956,182957,182958,182959,182960,182961,182962,182963,182964,182965,182966,182967,182968,182969,182970,182971,182972,182973,182974,182975,182976,182977,182978,182979,182980,182981,182982,182983,182984,182985,182986,182987,182988,182989,182990,182991,182992,182993,182994,182995,182996,182997,182998,182999,183000,183001,183002,183003,183004,183203,183853,184129,184130,184131,184132,184133,184134,184135,184136,184137,184138,184139,184140,184141,184142,184143,184144,184145,184146,184147,184148,184149,184150,184151,184152,184153,184154,184156
  }
}

CS.Styles = {
	list = {},
	oldlist = {},
}

CS.Rune = {
  level = {
    '1 - 10',
    '5 - 15',
    '10 - 20',
    '15 - 25',
    '20 - 30',
    '25 - 35',
    '30 - 40',
    '35 - 45',
    '40 - 50',
    CS.ChampionPointsTexture..'10',
    CS.ChampionPointsTexture..'30',
    CS.ChampionPointsTexture..'50',
    CS.ChampionPointsTexture..'70',
    CS.ChampionPointsTexture..'100',
    CS.ChampionPointsTexture..'150',
    CS.ChampionPointsTexture..'160'
  },
  skillLevel = {1,1,2,2,3,3,4,4,5,5,6,7,8,9,10,10},
  aspectSkill = 1,
  potencySkill = 1,
  rune = {
    [ITEMTYPE_ENCHANTING_RUNE_ESSENCE] = {
        45831,45832,45833,45834,45835,45836,
        45837,45838,45839,45840,45841,45842,
        45843,45846,45847,45848,45849,68342,
		166045
      },
    [ITEMTYPE_ENCHANTING_RUNE_POTENCY] = { 
      {
        45855,45856,45857,45806,45807,45808,
        45809,45810,45811,45812,45813,45814,
        45815,45816,64509,68341
      }, 
      {
        45817,45818,45819,45820,45821,45822,
        45823,45824,45825,45826,45827,45828,
        45829,45830,64508,68340
      } 
    },
    [ITEMTYPE_ENCHANTING_RUNE_ASPECT] = {
        45850,45851,45852,45853,45854
      },
  },
  -- item, essence, potency table, position
  glyph = {
    [ITEMTYPE_GLYPH_ARMOR] = {
      {26580,45831,1,1}, -- health, oko
      {26582,45832,1,2}, -- magicka, makko
      {26588,45833,1,3}, -- stamina, deni
      {68343,68342,1,4}, -- prismatic defense, hakeijo 
    },
    [ITEMTYPE_GLYPH_WEAPON] = {
      {68344,68342,2, 1}, -- prismatic onslaught, hakeijo 
      {54484,45843,1, 2}, -- weapon damage, okori
      {26845,45842,2, 3}, -- crushing, deteri
      {43573,45831,2, 4}, -- absorb health, oko
      {45868,45832,2, 5}, -- absorb magicka, makko
      {45867,45833,2, 6}, -- absorb stamina, deni
      {45869,45834,2, 7}, -- decrease health, okoma
      { 5365,45839,1, 8}, -- frost weapon, dekeipa
      {26848,45838,1, 9}, -- flame weapon, rakeipa
      {26844,45840,1,10}, -- shock weapon, meip
      {26587,45837,1,11}, -- poison weapon, kuoko
      {26841,45841,1,12}, -- foul weapon, haoko
      { 5366,45842,1,13}, -- hardening, deteri
      {26591,45843,2,14}, -- weakening, okori
    },
    [ITEMTYPE_GLYPH_JEWELRY] = {
      {26581,45834,1, 1},  -- health recovery, okoma
      {26583,45835,1, 2},  -- magicka recovery, makkoma
      {26589,45836,1, 3},  -- stamina recovery, denima
      {45870,45835,2, 4},  -- reduce spell cost, makkoma
      {45871,45836,2, 5},  -- reduce feat cost, denima
      {45883,45847,1, 6},  -- increase physical harm, taderi
      {45884,45848,1, 7},  -- increase magical harm, makderi
      {45885,45847,2, 8},  -- decrease physical harm, taderi
      {45886,45848,2, 9},  -- decrease spell harm, makderi
      { 5364,45839,2,10},  -- frost resist, dekeipa
      {26849,45838,2,11},  -- flame resist, rakeipa
      {43570,45840,2,12},  -- shock resist, meip
      {26586,45837,2,13},  -- poison resist, kuoko
      {26847,45841,2,14},  -- disease resist, haoko
      {45872,45849,1,15},  -- bashing, kaderi
      {45873,45849,2,16},  -- shielding, kaderi
      {45874,45846,1,17},  -- potion boost, oru
      {45875,45846,2,18},  -- potion speed, oru
	  {166046,166045,2,19}, -- reduce skill cost, indeko
	  {166047,166045,1,19}, -- prismatic recovery, indeko
    },
  },
  job = { amount = 0, slot = {0,0,0}},
  refine = { glyphs = {nil}, crafted = false }
}
CS.Flask = {
  reagent = {},
  noBad = false,
  solvent = {883,1187,4570,23265,23266,23267,23268,64500,64501},
  reagentTrait = {
    {30165, 2,14,12,23},
    {30158, 9, 3,18,13},
    {30155, 6, 8, 1,22},
    {30152,18, 2, 9, 4},
    {30162, 7, 5,16,11},
    {30148, 4,10, 1,23},
    {30149,16, 2, 7, 6},
    {30161, 3, 9, 2,24},
    {30160,17, 1,10, 3},
    {30154,10, 4,17,12},
    {30157, 5, 7, 2,21},
    {30151, 2, 4, 6,20},
    {30164, 1, 3, 5,19},
    {30159,11,22,24,19},
    {30163,15, 1, 8, 5},
    {30153,13,21,23,19},
    {30156, 8, 6,15,12},
    {30166, 1,13,11,20}
  },
  solventSelection = 1,
  traitSelection = {1},
  traitIcon = {
    'restorehealth','ravagehealth', 
    'restoremagicka','ravagemagicka',
    'restorestamina','ravagestamina',
    'increaseweaponpower','lowerweaponpower',
    'increasespellpower','lowerspellpower',
    'weaponcrit','lowerweaponcrit',
    'spellcrit','lowerspellcrit',
    'increasearmor','lowerarmor',
    'increasespellresist','lowerspellresist',
    'unstoppable','stun',
    'speed','reducespeed',
    'invisible','detection',
  }
}
CS.CraftIcon = {  
  'esoui/art/icons/ability_smith_007.dds',       -- BlackSmithing
  'esoui/art/icons/ability_tradecraft_008.dds',  -- Closier
  'esoui/art/icons/ability_enchanter_001b.dds',  -- Enchanting
  'esoui/art/icons/ability_alchemy_006.dds',     -- Alchemy
  'esoui/art/icons/ability_provisioner_002.dds', -- Provisioning
  'esoui/art/icons/ability_tradecraft_009.dds',  -- Woodworking
  'esoui/art/icons/passive_jewelerengraver.dds',  -- Jewelry Crafting
}
CS.Flags = {
  'esoui/art/guild/guildbanner_icon_aldmeri.dds',    -- AD
  'esoui/art/guild/guildbanner_icon_ebonheart.dds',  -- EP
  'esoui/art/guild/guildbanner_icon_daggerfall.dds', -- DC
}
CS.Classes = {
  'esoui/art/icons/class/class_dragonknight.dds', -- Dragon Knight
  'esoui/art/icons/class/class_sorcerer.dds',     -- Sorcerer
  'esoui/art/icons/class/class_nightblade.dds',   -- NightBlade
  'esoui/art/icons/class/class_warden.dds',       -- Warden
  'esoui/art/icons/class/class_necromancer.dds',  -- Necromancer
  'esoui/art/icons/class/class_templar.dds'       -- Templar
}
CS.Races = {
	'esoui/art/charactercreate/charactercreate_bretonicon_down.dds', -- Breton
	'esoui/art/charactercreate/charactercreate_redguardicon_down.dds', -- Redguard
	'esoui/art/charactercreate/charactercreate_orcicon_down.dds', -- Orc
	'esoui/art/charactercreate/charactercreate_dunmericon_down.dds', -- Dark Elf
	'esoui/art/charactercreate/charactercreate_nordicon_down.dds', -- Nord
	'esoui/art/charactercreate/charactercreate_argonianicon_down.dds', -- Argonian
	'esoui/art/charactercreate/charactercreate_altmericon_down.dds', -- High Elf
	'esoui/art/charactercreate/charactercreate_bosmericon_down.dds', -- Wood Elf
	'esoui/art/charactercreate/charactercreate_khajiiticon_down.dds', -- Khajiit
	'esoui/art/charactercreate/charactercreate_imperialicon_down.dds', -- Imperial
}

CS.Mount = {
	['skills'] = 'esoui/art/mounts/tabicon_ridingskills_down.dds',
	['speed'] = 'esoui/art/mounts/ridingskill_speed.dds',
	['capacity'] = 'esoui/art/mounts/ridingskill_capacity.dds',
	['stamina'] = 'esoui/art/mounts/ridingskill_stamina.dds',
}

CS.Sets = { --Items: Heavy, Medium, Robe, Shirt GetUnitZoneIndex('player') { Daggerfall , Aldmeri, Ebonheart }
  {traits=2,nodes={  7,175, 77}, item={ 43873, 49584, 49575, 49580}, zone={  2,178,  9}},  -- Ashen Grip
  {traits=2,nodes={  1,177, 71}, item={ 46507, 46519, 43805, 46516}, zone={  2,178,  9}},  -- Death's Wind
  {traits=2,nodes={216,121, 65}, item={ 47272, 43816, 47279, 47284}, zone={  2,178,  9}},  -- Night's Silence
  {traits=2,nodes={339,339,339}, item={130383,130398,130390,130395}, zone={589,589,589}},  -- CC:Innate Axiom
  {traits=2,nodes={376,376,376}, item={143174,143189,143181,143186}, zone={407,407,407}},  -- Murkmire:Naga Shaman

  {traits=3,nodes={359,359,359}, item={135730,135745,135737,135742}, zone={616,616,616}},  -- Summerset:Adept Rider
  {traits=3,nodes={276,276,276}, item={121564,121579,121571,121576}, zone={467,467,467}},  -- Assassin's Guile
  {traits=3,nodes={ 19,165, 24}, item={ 50715, 50728, 43979, 50725}, zone={  4,180, 10}},  -- Torug's Pact
  {traits=3,nodes={237,237,237}, item={ 69928, 69935, 69942, 69943}, zone={379,379,379}},  -- Trial by Fire
  {traits=3,nodes={ 15,169,205}, item={ 46890, 46902, 43808, 46900}, zone={  4,180, 10}},  -- Twilight's Embrace
  {traits=3,nodes={ 23,164, 32}, item={ 43830, 48051, 48042, 48047}, zone={  4,180, 10}},  -- Armor of the Seducer
  {traits=3,nodes={382,382,382}, item={148701,148716,148708,148713}, zone={681,681,681}},  -- Elsweyr:Vastarie's Tutelage
  {traits=3,nodes={403,403,403}, item={155417,155432,155424,155429}, zone={720,720,720}},  -- Dragonhold:Daring Corsair
  {traits=3,nodes={ -3, -3, -3}, item={158329,158344,158336,158341}, zone={ 37, 37, 37}},  -- Harrowstorm:Critical Riposte
  {traits=3,nodes={ -3, -3, -3}, item={158703,158718,158710,158715}, zone={ 37, 37, 37}},  -- Harrowstorm:Unchained Aggressor
  {traits=3,nodes={ -3, -3, -3}, item={159077,159092,159084,159089}, zone={ 37, 37, 37}},  -- Harrowstorm:Dauntless Combatant
  {traits=3,nodes={430,430,430}, item={163070,163085,163082,163077}, zone={744,744,744}},  -- Greymoor:Spell Parasite
  {traits=3,nodes={447,447,447}, item={168012,168027,168019,168024}, zone={783,783,783}},  -- Markarth:Red Eagle's Fury
  {traits=3,nodes={464,464,464}, item={172468,172483,172475,172480}, zone={834,834,834}},  -- Blackwood:Hist Whisperer	
  {traits=3,nodes={478,478,478}, item={178819,178834,178826,178831}, zone={1272,1272,1272}},  -- Deadlands:Wretched Vitality

  {traits=4,nodes={  9,154, 51}, item={ 51098, 43998, 51105, 51110}, zone={  5, 18, 19}},  -- Hist Bark
  {traits=4,nodes={ 13,148, 48}, item={ 48805, 48817, 43849, 48813}, zone={  5, 18, 19}},  -- Magnus' Gift
  {traits=4,nodes={ 82,151, 78}, item={ 47656, 47672, 47663, 47668}, zone={  5, 18, 19}},  -- Whitestrake's Retribution
  {traits=4,nodes={337,337,337}, item={130733,130748,130740,130745}, zone={589,589,589}},  -- CC:Fortified Brass
  {traits=4,nodes={379,379,379}, item={143544,143559,143551,143556}, zone={407,407,407}},  -- Murkmire:Might of the Lost Legion

  {traits=5,nodes={155,105, 95}, item={ 44022, 52633, 52624, 52629}, zone={ 17, 11, 15}},  -- Alessia's Bulwark
  {traits=5,nodes={254,254,254}, item={ 75399, 75414, 75406, 75411}, zone={448,448,448}},  -- DB:Kvatch Gladiator
  {traits=5,nodes={199,201,203}, item={ 60273, 60288, 60280, 60285}, zone={346,346,346}},  -- Noble's Conquest
  {traits=5,nodes={397,397,397}, item={148331,148346,148338,148343}, zone={681,681,681}},  -- Elsweyr:Senche-Raht's Grit
  {traits=5,nodes={137,103, 89}, item={ 44016, 52252, 52243, 52248}, zone={ 17, 11, 15}},  -- Song of Lamae
  {traits=5,nodes={257,257,257}, item={ 71792, 71799, 71806, 71807}, zone={442,442,442}},  -- Tava's Favor
  {traits=5,nodes={ 58,101, 93}, item={ 43834, 48434, 48425, 48430}, zone={ 17, 11, 15}},  -- Vampire's Kiss
  {traits=5,nodes={418,418,418}, item={161234,161249,161241,161246}, zone={743,743,743}},  -- Greymoor:Stuhn's Favor (or 416)
  {traits=5,nodes={461,461,461}, item={173216,173231,173223,173228}, zone={834,834,834}},  -- Blackwood:Diamond's Victory (or 481)	
  {traits=5,nodes={489,489,489}, item={179657,179762,179754,179759}, zone={1283,1283,1283}},  -- Deadlands:Iron Flask

  {traits=6,nodes={338,338,338}, item={131083,131098,131090,131095}, zone={589,589,589}},  -- CC:Mechanical Acuity
  {traits=6,nodes={ 34,156,118}, item={ 49188, 43861, 49195, 49200}, zone={ 14,179, 16}},  -- Night Mother's Gaze
  {traits=6,nodes={282,282,282}, item={122264,122279,122271,122276}, zone={467,467,467}},  -- Shacklebreaker
  {traits=6,nodes={ 35,144,111}, item={ 51479, 44005, 51486, 51491}, zone={ 14,179, 16}},  -- Willow's Path
  {traits=6,nodes={ 39,161,113}, item={ 51857, 51873, 51864, 51869}, zone={ 14,179, 16}},  -- Hunding's Rage
  {traits=6,nodes={241,241,241}, item={ 69578, 69585, 69592, 69593}, zone={379,379,379}},  -- Law of Julianos
  {traits=6,nodes={360,360,360}, item={136080,136095,136087,136092}, zone={632,632,632}},  -- Summerset:Sload's Semblance
  {traits=6,nodes={407,407,407}, item={155791,155806,155798,155803}, zone={720,720,720}},  -- Dragonhold:Ancient Dragonguard
  {traits=6,nodes={442,442,442}, item={168386,168401,168393,168398}, zone={783,783,783}},  -- Markarth:Karth's

  {traits=7,nodes={199,201,203}, item={ 60623, 60638, 60630, 60635}, zone={346,346,346}},  -- Redistributor
  {traits=7,nodes={257,257,257}, item={ 72142, 72149, 72156, 72157}, zone={442,442,442}},  -- Clever Alchemist
  {traits=7,nodes={251,251,251}, item={ 75749, 75764, 75756, 75761}, zone={448,448,448}},  -- DB:Varen's Legacy
  {traits=7,nodes={375,375,375}, item={142804,142819,142811,142816}, zone={407,407,407}},  -- Murkmire:Grave-Stake Collector
  {traits=7,nodes={417,417,417}, item={161608,161623,161620,161615}, zone={743,743,743}},  -- Greymoor:Dragon's Appetite (or 429)
  {traits=7,nodes={483,483,483}, item={172842,172857,172849,172854}, zone={834,834,834}},  -- Blackwood:Heartland Conqueror's
  {traits=7,nodes={494,494,494}, item={179193,179208,179200,179205}, zone={1272,1272,1272}},  -- Deadlands:Deadlands Demolisher

  {traits=8,nodes={386,386,386}, item={147961,147976,147968,147973}, zone={681,681,681}},  -- Elsweyr:Coldharbour's Favorite
  {traits=8,nodes={329,329,329}, item={121914,121929,121921,121926}, zone={467,467,467}},  -- Daedric Trickery  
  {traits=8,nodes={ -2, -2, -2}, item={ 53765, 44082, 53772, 53777}, zone={ 14,179, 16}},  -- Kagrenac's Hope
  {traits=8,nodes={ -2, -2, -2}, item={ 44033, 53015, 53006, 53011}, zone={ 14,179, 16}},  -- Orgnum's Scales
  {traits=8,nodes={ -1, -1, -1}, item={ 53384, 53394, 44053, 53392}, zone={ 14,179, 16}},  -- Eyes of Mara
  {traits=8,nodes={ -1, -1, -1}, item={ 44102, 54158, 54149, 54154}, zone={ 14,179, 16}},  -- Shalidor's Curse
  {traits=8,nodes={135,135,135}, item={ 49954, 49965, 43968, 49962}, zone={154,154,154}},  -- Oblivion's Foe
  {traits=8,nodes={133,133,133}, item={ 50335, 50346, 43972, 50343}, zone={154,154,154}},  -- Spectre's Eye
  {traits=8,nodes={217,217,217}, item={ 54942, 54949, 54963, 54956}, zone={500,500,500}},  -- Way of the Arena

  {traits=9,nodes={234,234,234}, item={ 58154, 58161, 58174, 58168}, zone={500,500,500}},  -- Twice-Born Star
  {traits=9,nodes={199,201,203}, item={ 60973, 60988, 60980, 60985}, zone={346,346,346}},  -- Armor Master
  {traits=9,nodes={237,237,237}, item={ 70628, 70635, 70642, 70643}, zone={379,379,379}},  -- Morkuldin
  {traits=9,nodes={255,255,255}, item={ 72492, 72499, 72506, 72507}, zone={442,442,442}},  -- Eternal Hunt
  {traits=9,nodes={254,254,254}, item={ 76099, 76114, 76106, 76111}, zone={448,448,448}},  -- DB:Pelinal's Aptitude
  {traits=9,nodes={354,354,354}, item={136430,136445,136437,136442}, zone={616,616,616}},  -- Summerset:Nocturnal's Favored (or 356)
  {traits=9,nodes={406,406,406}, item={156165,156180,156172,156177}, zone={720,720,720}},  -- Dragonhold:New Moon Acolyte (or 405)
  {traits=9,nodes={430,430,430}, item={168760,168775,168767,168772}, zone={783,783,783}},  -- Markarth:Aetherial Ascension (may not be closest)
}

CS.AccountInit = {
  mainchar = false,
  timer = { [12] = 0, [24] = 0},
  position = {350,100},
  questbox = {GuiRoot:GetWidth()-500,-20},
  button = {75,75},
  player = {},
  storage = {},
  materials = {},
  announce = {},
  crafting = { researched = {}, researching = {}, studies = {}, stored = {}, skill = {} },
  style = { tracking = {}, knowledge = {} },
  cook =  { tracking = {}, knowledge = {}, ingredients = {} },
  furnisher =  { tracking = {}, knowledge = {}, ingredients = {} },
  trait = { tracking = {} },
  coords = {
	style = {500,200}, 
	recipe = {600,200}, 
	blueprint = {GuiRoot:GetWidth()-500,140}, 
	rune = {GuiRoot:GetWidth()-544,140}, 
	cook = {GuiRoot:GetWidth()-544,140}, 
	overview = {(GuiRoot:GetWidth()-601)/2,(GuiRoot:GetHeight()-801)/2}
  },
  options = {
	showbutton = true,
	lockbutton = false,
	lockelements = false,
	closeonmove = true,
	useartisan = false,
	useflask = false,
	usequest = false,
	usecook = true,
	displaystyles = false,
	markitems = true,
	showsymbols = false,
	marksetitems = true,
	showstock = true,
	stacksplit = true,
	markduplicates = true,
	displayrunelevel = true,
	displaymm = true,
	displayttc = true,
	timeralarm = 1, --announce
	mountalarm = 1, --announce
	researchalarm = 1, --announce
	playrunevoice = true,
	advancedcolorgrid = true,
	lockprotection = true,
	sortsets = 1, --alphabetically
	sortstyles = 1, --alphabetically
	bulkcraftlimit = 10,
	overviewstyle = 1, --complete
	userune = true,	
	userunecreation = true,
	useruneextraction = true,
	userunerecipe = true,
	displayknown = true,
	displayunknown = true,
  }
}

CS.CharInit = {
  income = { GetDate(), GetCurrentMoney() },
  favorites = { {}, {}, {}, {}, {}, {} },
  recipe = 1,
  furniture = 1,
  potency = 1,
  essence = 1,
  aspect = 1,
  potencytype = 1,
  enchant = ITEMTYPE_GLYPH_ARMOR,
  runemode = 'craft',
  hidestyles = false,
  hidecrownstyles = false,
  hideperfectedstyles = false,
  hideKnownRecipes = false,
  hideUnknownRecipes = false,
  hideKnownBlueprints = false,
  hideUnknownBlueprints = false, 
  previewtype = 1
}

CS.ItemLinkCache = {
  [BAG_BACKPACK]={},
  [BAG_BANK]={},
  [BAG_VIRTUAL]={},
  [BAG_SUBSCRIBER_BANK]={},
}

CS.RawItemTypes = CS.Set{    
  ITEMTYPE_BLACKSMITHING_RAW_MATERIAL,
  ITEMTYPE_CLOTHIER_RAW_MATERIAL,
  ITEMTYPE_WOODWORKING_RAW_MATERIAL,
  ITEMTYPE_JEWELRYCRAFTING_RAW_MATERIAL,
  ITEMTYPE_JEWELRYCRAFTING_RAW_BOOSTER,
  ITEMTYPE_JEWELRY_RAW_TRAIT,
  ITEMTYPE_RAW_MATERIAL
}

CS.previewType = {
  [CS.Loc.previewType[1]] = 1,
  [CS.Loc.previewType[2]] = 2,
  [CS.Loc.previewType[3]] = 3,
  [CS.Loc.previewType[4]] = 4,
}

CS.LBE = {
	Cook = "Cook",
	Furnisher = "Furnisher",
	Styles = "Styles",
	Crafting = "Crafting",
	Researched = "Researched",
}

CS.Data = {
	cook = {
		knowledge = {
		}
	},
	furnisher = {
		knowledge = {
		}
	},
	style = {
		knowledge = {
		}
	},
	crafting = {
		studies = {
		
		},
		researched = {
		
		},
	}
}

CS.Crafting = {
list = {}
}

-- compile trait structure
function CS.Crafting.CompileTraits() 
  local crafts = {CRAFTING_TYPE_BLACKSMITHING,CRAFTING_TYPE_CLOTHIER,CRAFTING_TYPE_WOODWORKING,CRAFTING_TYPE_JEWELRYCRAFTING}

  if not CS.Crafting.list then CS.Crafting.list = {} end
  for _,craft in pairs(crafts) do
    if not CS.Crafting.list[craft] then CS.Crafting.list[craft] = {} end
    for line = 1, GetNumSmithingResearchLines(craft) do
      if not CS.Crafting.list[craft][line] then CS.Crafting.list[craft][line] = {} end
      for trait = 1, CS.MaxTraits do
		if not CS.Crafting.list[craft][line][trait] then CS.Crafting.list[craft][line][trait] = false end		
      end
    end
  end	
end